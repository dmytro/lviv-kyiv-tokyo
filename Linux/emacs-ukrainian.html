    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
    <HTML>
    <HEAD>
    <TITLE> Ukrainian language in emacs </TITLE>
    <META NAME="generator" CONTENT="txt2html v1.25">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-u" >
    </HEAD>
    <BODY>
<H1><A NAME="section-1">Використання української мови в X/GNU Emacs'і</A></H1>

<P>
Вживання української мови в  <TT>emacs</TT> 'і базується в основному на
використанні модуля  <TT>ukrainian.el</TT> . Цей модуль дозволяє друкувати
кількома різними кодовими таблицями, перекодовувати тексти з одних
кодових таблиць в інші, використовувати різні розкладки клавіатури,
тощо.

<P>
Разом з  <TT>emacs</TT> 'ом можливе також використання стандартних драйверів
клавіатури для Юнікса. Існує кілька таких драйверів, придатних для
друку українською мовою. В залежності від середовища, в якому ви
плануєте використовувати  <TT>emacs</TT> , ви можете обрати той чи інший
драйвер. Для X існують такі програми, як xrus та kikbd. Xrus може
працювати в кількох різноманітних Юніксах, в той час як kikbd є
стандартною складовою KDE і тому обмежений до тих систем, на яких KDE
працює.

<P>
Однак стандартні клавіатурні драйвери мають один суттєвий недолік при
роботі з  <TT>emacs</TT> 'ом. Драйвери дають вам можливість друку українською та
англійською мовами. Але коли ви друкуєте українською (тобто
знаходитесь в українському режимі), ви не можете виконати жодної
команди  <TT>emacs</TT> 'у. Тому, перш ніж виконати будь-яку команду, потрібно
перемикнутися в англійський режим, виконати команду і, повернувшись в
український режим, продовжувати друкувати. Постійне перемикання з
одного режиму в інший дуже незручне. І тому, тут я зупинюся тільки на
використанні модуля  <TT>ukrainian.el</TT> , і не буду торкатися інших питань.

<P>
Дуже чітке і доступне пояснення вживання української мови в  <TT>emacs</TT> 'і
написане Степаном Бобиком на <a href="http://www.accessone.com/~bobick/software/emacs_howto.html">його
сторінці</a>. На цій сторінці йдеться лише про деякі доповнення до
цього матеріалу, а саме такі деталі, які дещо покращують роботу з
модулем.

<H2><A NAME="section-1.1">Зміни до модуля ukrainian.el</A></H2>

<P>
Через деякі розбіжності в типах даних в elisp'і GNU  <TT>Emacs</TT> 'а та elisp'і
 X <TT>Emacs</TT> 'а модуль, написаний для GNU  <TT>Emacs</TT> 'а, не працює з X <TT>Emacs</TT> 'ом.

<P>
<a href="./ukrainian.el">Тут </a> ви можете знайти трохи видозмінену
версію  <TT>ukrainian.el</TT> , яка дозволяє працювати з обома версіями  <TT>emacs</TT> 'ів.

<H2><A NAME="section-1.2">Старт emacs'у</A></H2>

<P>
Починаючи з версії 20.x як  <TT>Emacs</TT> , так і X <TT>Emacs</TT>  мають підтримку для
багатьох мов. Ця підтримка з'явилася з часу  поєднання двох окремих проектів
-  <TT>emacs</TT>  та mule ( <STRONG>MU</STRONG> lti <STRONG>L</STRONG> anguage  <STRONG>E</STRONG> macs). 

<P>
В нових версіях  <TT>emacs</TT> 'ів значно змінене внутрішнє подання тексту. В
переважній більшості текстових редакторів текст уявляється звичайною
послідовністю байтів. І таке подання справедливе до того часу, поки
йде обробка так званих "малих" писемних систем. До малих систем
відносяться практично всі мови Європи і багато мов інших реґіонів -
тобто всі мови з абеткою. Для "великих" писемних систем - ієроґліфічні
системи писемності (китайська, японська), такі мови, як арабська,
корейська, тощо - одного байту (всього 256 символів) не вистачає. Тож
mule (а тепер  <TT>emacs</TT> ) намагається розв'язати це питання шляхом
використання більше, ніж одного байту на літеру.

<P>
Дякуючи цьому,  <TT>emacs</TT> , в якому включена підтримка багатобайтного подання
тексту, дуже часто робить не те, що вам би хотілося. І навіть, якщо на
перший погляд все йде, так як треба, пізніше може виявитися, що не всі
функції в модулі  <TT>ukrainian.el</TT>  працюють. 

<P>
Якщо новий  <TT>emacs</TT>  підтримує багато мов, то навіщо ж тоді ще
використання ще якогось модуля? Відповідь дуже проста: новий  <TT>emacs</TT>  не
підтримує української мови. І на даний час (жовтень 1999) ще не відомо
коли буде підтримувати. Підтримка російської мови, яка існує зараз в
обох  <TT>emacs</TT> 'ах для української не підходить, і, як виявилося, не вже
легко додати ті кілька літер, яких не вистачає.

<P>
Якщо ви маєте (x) <TT>emacs</TT> 'а номер версії якого, 20 або більше (перевірити
версію можна за допомогою  <TT> <TT>emacs</TT>  -version</TT> ), то щоб модуль
 <TT>ukrainian.el</TT>  працював так як треба, слід додати ще один параметр при
старті  <TT>emacs</TT> 'у:

<PRE>
        <TT>emacs</TT>  --unibyte [далі ті параметри, якими ви користувалися]
</PRE>

<P>
Цей параметр відключає підтримку для всих тих мов, які закладені в
 <TT>emacs</TT> . Але я сподіваюся, що більшості україномовних користувачів немає
необхідності користуватися японською, китайською, тощо. Тому таке
рішення задовольнить всих тих, кому потрібна англійська та
українська. Після встановлення модуля russian.el, можливо також
користування російською. Далі йде про те, як користуватися трьома
мовами одночасно.

<H2><A NAME="section-1.3">Необхідні зміни до .emacs</A></H2>

<P>
Далі я переходжу до основної частини свого твору. Вона складається із
того тексту, який необхідно додати до файлу . <TT>emacs</TT> , та моїх коментарів
до цього тексту. Навіть, якщо ви не розумієте про що йде мова, просто
"cut-n-paste" всі ці шматки lisp коду, вставте його в . <TT>emacs</TT>  і ви
готові. 


<H3><A NAME="section-1.3.1">Як змусити emacs "розуміти" українські літери</A></H3>

<P>
Одним (одним із?) недоліком українського режиму при користуванні
 <TT>ukrainian.el</TT>  є те, що  <TT>emacs</TT>  не розуміє української абетки. Всі
українські літери в ньому вважаються розділовими знаками. І тому
будь-яка команда типу стерти слово вперед/назад (M-x
backward-kill-word, M-x forward-kill-word) може закінчитися крахом -
 <TT>emacs</TT>  зітре весь український текст від курсора до першої англійської
літери. Теж саме стосується пересування по тексту: команди M-x
forward-word, M-x backward-word (клавіші - M-<стрілка праворуч>,
M-<стрілка лівовуч>) пересуваються по тексту не словами, а
англійськими літерами. 

<P>
Наступний текст дозволяє виправити ці помилки. Змінні cuc та clc
доповнюють  <TT>emacs</TT>  великими та малими літерами української мови. Але, ця
модифікація працює тільки для кодової таблиці koi8-u. Саме цьому я не
включаю ці визначення в текст модуля  <TT>ukrainian.el</TT> , для цього потрібно
було б щось солідніше - хоча б для кількох кодових таблиць.


<PRE>
        ;;;;;; Ukrainian/Russian viewing/input setting
        ;;;

        ;;
        ;; D.Kovalev (DK) kov@tokyo.email.ne.jp :- Some customizations around
        ;; ukrainian.el, russian.el and Cyrillic HOWTO from Linux HOWTO's
        ;; 
        ;; From Cyrillic HOWTO by Belikov :
        ;;
        ;; [...]  <TT>Emacs</TT>  doesn't know yet, that Cyrililic characters may
        ;; constitute a word, let alon the upper/lower case conversion
        ;; rules. In order to teach  <TT>Emacs</TT>  doing that, you have to modify the
        ;; syntax and case tables of  <TT>emacs</TT> :
        ;;
        (require 'case-table)
        ;; added 4 Ukrainian letters (DK)
        ;; і \246\266 
        ;; ї \247\267
        ;; ґ \255\275
        ;; є \244\264
        ;;
        ;; Also changed r?c -> c?c from the source to be politically
        ;; correct. It's supposed to be 'Cyrillic Character', not 'Russian',
        ;; right? (DK) 
        ;;
                                                ; Attention !!! included here
                                                ; works only for KOI8-U, for
                                                ; other encodings 'cuc' and
                                                ; 'cul' entries must be
                                                ; redefined.
        (let* ((cuc "\266\267\275\264\341\342\367\347\344\345\263\366\372\351\352\353\354\355\356\357\360\362\363\364\365\346\350\343\376\373\375\370\371\377\374\340\361")
               (clc "\246\247\255\244\301\302\327\307\304\305\243\326\332\311\312\313\314\315\316\317\320\322\323\324\325\306\310\303\336\333\335\330\331\337\334\300\321")
               (i 0)
               (len (length cuc)))
          (while (< i len)
            (modify-syntax-entry (elt cuc i) "w  ")
            (modify-syntax-entry (elt clc i) "w  ")
            (set-case-syntax-pair (elt cuc i) (elt clc i) (standard-case-table))
            (setq i (+ i 1))))
</PRE>

<P>
Дякуючи цим модифікаціям також можливо користуватися функціями
переведення слів із реґістру в реґістр - тобто із малих українських
літер в великі, і навпаки. 

<H3><A NAME="section-1.3.2">Як зробити так, щоб emacs показував українські літери</A></H3>

<P>
В цьому розділі нічого нового немає. Все повністю взяте із переписки з
Степаном Бобиком і може бути знайденим на його сторінці з українізації
 <TT>emacs</TT> 'у. Тому я привожу тут це без всяких коментарів:

        
<PRE>
        ;; Ukrainian displaying mode -- file: ukrainian.el --------------
        ;; From Stephen Bobik
        
                                                ; Force the upper part of the
                                                ; ascii displayed as-it-is
        (standard-display-8bit 160 255)
                                                ; Load the  <TT>emacs</TT>  lisp code to
                                                ; perform koi8 text
                                                ; transformations.
</PRE>

<H3><A NAME="section-1.3.3">Як зробити так, щоб можна було користуватися не тільки українською, а також і російськю мовами</A></H3>

<P>
Для вживання російської мови в  <TT>emacs</TT> 'і існує інший модуль - russian.el
(від якого походить  <TT>ukrainian.el</TT> ).  <TT>emacs</TT>  дозволяє користуватися обома
модулями одночасно. Для цього потрібно завантажити обидва модулі в
 <TT>emacs</TT> , це робиться за допомогою двох наступних рядків тексту. Зверніть
увагу, що в моїй системі всі модулі в  <TT>emacs</TT>  Lisp'і знаходяться в
директорії  <TT>~/.lisp</TT> . Змініть цю назву відповідно до вашої системи. 


<PRE>
        (load-file "~/.lisp/ukrainian.el")
        (load-file "~/.lisp/russian.el")
</PRE>

<P>
Але, переходити із українського режиму в російський безпосередньо
неможливо. Якщо ви, знаходячись, наприклад, в українському режимі
спробуєте виконати команду  <TT>M-x russian-insertion-mode</TT> ,  <TT>emacs</TT> 
перейде в якийсь невідомий режим і почне друкувати бозна що. Для того,
щоб коректно перейти з режиму в режим, потрібно спочатку вийти з
українського режиму (командою  <TT>M-x ukrainian-insertion-mode</TT> , а
потім вже вмикати російський режим командою  <TT>M-x russian-insertion-mode</TT> .

<P>
З урахуванням цього я додав кілька нових функцій, які теж мають своє
місце в . <TT>emacs</TT> , і забезпечують необхідну функціональність. Функція
 <TT>toggle-ukrainian</TT> , перш за все  <STRONG>вимикає</STRONG>  російський режим (не
залежно від того був він вмикнений, чи ні), а потім вже перемикає
український режим (тобто перемикається з українського в англійський і
навпаки). 


        
<PRE>
        ;; Because I have both Ukrainian and Russian in my  <TT>emacs</TT>  I need
        ;; following. If I, let's say, in Ukrainian insertion mode and want to
        ;; switch to Russian, I need to switch Ukrianian off first and *then*
        ;; turn Russian on. If I do 'M-x russian-insertion-mode', without
        ;; doing 'M-x ukrainian-insertion-mode' my keyboard ends up all
        ;; screwed. And vice-versa for switching from R -> U. So the
        ;; following 2 functions defined to provide easy "cross" switching
        ;; from one mode into another. (-DK)
        
        (defun toggle-ukrainian ()
          (interactive)
          "Make sure the Russian is off first and then toggle Ukrainian"
          (russian-insertion-mode -1)
          (ukrainian-insertion-mode)
          )
</PRE>

<P>
Функція  <TT>toggle-russian</TT>  працює аналоґічно до  <TT>toggle-ukrainian</TT> .
        
<PRE>
        (defun toggle-russian ()
          (interactive)
          "Turn off Ukrainian mode before setting Russian mode"
          (ukrainian-insertion-mode -1)
          (russian-insertion-mode)
        )
</PRE>

<H3><A NAME="section-1.3.4">Перемикання клавіатур</A></H3>

<P>
Для того, щоб було зручно перемикати клавіатуру з одного режиму в
інший, в моєму . <TT>emacs</TT>  визначені такі "клавіатурні прискорювачі":

        
<PRE>
        (global-set-key "\C-c\C-u" 'toggle-ukrainian)
        (local-set-key "\C-c\C-u" 'toggle-ukrainian)
        (global-set-key "\C-c\C-r" 'toggle-russian)
        (local-set-key "\C-c\C-r" 'toggle-russian)
</PRE>

<P>
 <TT>CTRL-C, CTRL-U</TT>  вмикає/вимикає український режим, а 
 <TT>CTRL-C, CTRL-R</TT>  - російський. 

<P>
Я - давній Макінтошевський фан. Першим комп'ютером, в якому з'явилася
справжня підтримка багатомовних середовищ, був (і багато в чому
залишається єдиним до сьогоднішнього дня) Макінтош. Я дуже довго
користувався Макінтошем і довгий час в  <TT>emacs</TT> 'і мені не вистачало тих
клавіш, якими я перемикався з мови на мову в Макінтоші -
< <TT>CMD</TT> >-< <TT>SPACE</TT> >. І хоча, звичайно, я не мав ніякої надії знайти на своїй
пісішній (чи навіть спарківській) клавіатурі клавішу < <TT>CMD</TT> >, але мене
не полишали сподівання замінити її на < <TT>ALT</TT> >.

<P>
Наступний шматок коду дозволяє вмикати/вимикати український режим за
допомогою < <TT>Alt</TT> >-< <TT>ПРОПУСК</TT> >. 

<PRE>
                                                ;Aug 11 1999
        ;; Two more bindings for Ukrainan - <META>-<SPACE>
        (local-set-key  [?\M- ] 'toggle-ukrainian)
        (global-set-key [?\M- ] 'toggle-ukrainian)
        
        ;;
        ;; End of Ukrainian/Cyrillic settings
        ;;
</PRE>
        
<H2><A NAME="section-1.4">Кілька слів про користування модулем ukrainian.el</A></H2>

<P>
Далі - в стислій формі про користування модулем  <TT>ukrainian.el</TT> , особливо
там, де це стосується нових можливостей. 

<UL>
  <LI> Вмикнути/вимкнути українську клавіатуру
  <UL>
    <LI> <TT>M-x ukrainian-insertion-mode</TT>  або
    <LI> <TT>Ctrl-c Ctrl-u</TT>  або
    <LI> <TT>M-Space</TT> 

  </UL>
</UL>
<P>
Наступні команди є стандартними для  <TT>emacs</TT> 'а. Я їх приводжу тут
тільки тому, що без тих змін, які описані в цьому документі, вони не
працюють з українською мовою. 

<UL>
  <LI> Слово вперед/ слово назад
  <UL>
    <LI> вперед 
    <UL>
      <LI> <TT>M-x forward-word</TT>  або
      <LI> <TT>M-f</TT>  або
      <LI> <TT>M-<стрілка праворуч></TT> 
    </UL>
    <LI> назад 
    <UL>
      <LI> <TT>M-x backward-word</TT>  або
      <LI> <TT>M-b</TT>  або
      <LI> <TT>M-<стрілка ліворуч></TT> 

    </UL>
  </UL>
  <LI> Стерти слово 
  <UL>
    <LI> праворуч від курсора
    <UL>
      <LI> <TT>M-d</TT>  
    </UL>
    <LI> ліворуч від курсора
    <UL>
      <LI> <TT>M-Del</TT>  або
      <LI> <TT>M-Backspace</TT> 

    </UL>
  </UL>
  <LI> Змінити реґістр слова
  <UL>
    <LI> праворуч від курсора
    <UL>
      <LI> на малі літери
      <UL>
        <LI> <TT>M-l</TT>  
      </UL>
      <LI> на великі літери
      <UL>
        <LI> <TT>M-u</TT> 
      </UL>
      <LI> початок речення (перша літера велика, всі інші - малі)
      <UL>
        <LI> <TT>M-c</TT> 
      </UL>
    </UL>
    <LI> ліворуч від курсора
    <UL>
      <LI> на малі літери
      <UL>
        <LI> <TT>M-"-" M-l</TT>  
      </UL>
      <LI> на великі літери
      <UL>
        <LI> <TT>M-"-" M-u</TT> 
      </UL>
      <LI> початок речення (перша літера велика, всі інші - малі)
      <UL>
        <LI> <TT>M-"-" M-c</TT> 

      </UL>
    </UL>
  </UL>
</UL>
<H2><A NAME="section-1.5">Кілька корисних порад</A></H2>

<H3><A NAME="section-1.5.1">Конвертування із однієї кодової таблиці в іншу (транслітерація) за допомогою emacs'а.</A></H3>

<P>
Модуль  <TT>ukrainian.el</TT>  дозволяє не тільки передивлятися та редагувати
тексти різними кодовими таблицями, але і перекодовувати тексти із
однієї кодової таблиці в іншу. Для цього він має дві функції -
ukrainian-translate-buffer та ukrainian-translate-region. 

<P>
Перша функція транслітерує весь текст в відкритому буфері, друга -
тільки виділений блок тексту. 
 
<P>
Якщо ви, наприклад, отримали листа, написаного на Віндовс'і в кодовій
таблиці windows-1251, а маєте шрифти тільки для koi8-u, відкрийте
отриманий файл в  <TT>emacs</TT> 'і. І виконайте такі команди:
<UL>
  <LI> <TT>M-x ukrainian-translate-buffer</TT> 
  <LI> <TT>emacs</TT>  запитає про кодову таблицю, з якої треба транслітерувати
 текст. Введіть у відповідь: cp1251
  <LI> далі emacs запитає про кодову таблицю, в яку треба транслітерувати
 текст. Введіть у відповідь: 8koi. 

</UL>
<H3><A NAME="section-1.5.2">Скрипт для транслітерації текстів</A></H3>

<P>
Якщо вам доводиться конвертувати тексти досить часто (або просто
ліньки кожного разу відкривати текст і друкувати ці кілька команд), ви
можете написати дуже простенький скрипт для конвертування текстів. 

<P>
Відкрийте emacs і надрукуйте в ньому всі підряд українські літери. 
Порядок літер не має ніякого значення, і тому, щоб нічого не
пропустити, я друкую всі підряд клавіші на клавіатурі:

<PRE>
            йцукенгшщзхґфивапролджєячсмітьбюЙЦУКЕНГШЩЗХҐФИВАПРОЛДЖЄЯЧСМІТЬБЮїЇ
</PRE>

<P>
Далі зробіть копію всього цього рядка, і за допомогою функції
ukrainian-translate-region переведіть один із рядків в кодову таблицю
із якої (або в яку) ви збираєтесь перекладати тексти. Далі додайте
лапки навколо цих текстових рядків, додайте назву команди для
транслітерації  <TT>tr</TT>  і ще один невеликий рядок на вершині файлу і ваш
текстовий фільтр готовий. 

<P>
Наступний фільтр переводить тексти із  <TT>Windows-1251</TT>  в  <TT>KOI8-U</TT> . 

<PRE>
        #!/bin/sh
        tr \
        'ИЖСЙЕМЦЬЫГУЄТХБЮОПНКДФ╨ЪВЯЛЁРЭАЧижсйемцьыгу╔тхбюопнкдф╙ъвял╡рэач©╞' \
        'йцукенгшщзхґфивапролджєячсмітьбюЙЦУКЕНГШЩЗХҐФИВАПРОЛДЖЄЯЧСМІТЬБЮїЇ' 
</PRE>

<P>
Протилежний до нього, який перекладає із  <TT>KOI8-U</TT>  в  <TT>Windows-1251</TT>  є
такий:

<PRE>
        #!/bin/sh
        tr \
        'йцукенгшщзхґфивапролджєячсмітьбюЙЦУКЕНГШЩЗХҐФИВАПРОЛДЖЄЯЧСМІТЬБЮїЇ' 
        'ИЖСЙЕМЦЬЫГУЄТХБЮОПНКДФ╨ЪВЯЛЁРЭАЧижсйемцьыгу╔тхбюопнкдф╙ъвял╡рэач©╞' \
</PRE>


<P>
<br><br><BR>
<author><BR>
Дмитро Ковальов, <BR>
Токіо, жовтень 1999 р.<BR>
kov@tokyo.email.en.jp<BR>
</author>

 
    <hr noshade size=1>
    <address>
    Natalya and Dmytro Kovalev
    <br>Пишіть нам за адресою:<A HREF="mailto:kov@tokyo.email.ne.jp ">  kov@tokyo.email.ne.jp</A><BR>
    Домашня сторінка: <A HREF="http://www.asahi-net.or.jp/~as9d-kvlv">http://www.asahi-net.or.jp/~as9d-kvlv </A>
    <br>Втр Жов 26 18:50:57 JST 1999
    <hr noshade size=1></address>
    <center><a href="http://www.cybercount.com/cgi-bin/click.cgi">	    <img src="http://www.cybercount.com/cgi-bin/getimage.cgi">	    </a></center>Counter:  	    <IMG SRC="http://cybercount.com/cgi-bin/new/c?ID=dmytro&tr=yes&ref=emacs-ukrainian"><br clear>
    </BODY>
    </HTML>
