<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.1 release (February 19th, 1998)
originally by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Форматування</TITLE>
<META NAME="description" CONTENT="Форматування">
<META NAME="keywords" CONTENT="linux,ukrainian,guide,sag">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL="STYLESHEET" HREF="sag.css">
<LINK REL="next" HREF="node41.html">
<LINK REL="previous" HREF="node39.html">
<LINK REL="up" HREF="node34.html">
<LINK REL="next" HREF="node41.html">
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<!--Navigation Panel-->
<A NAME="tex2html971"
 HREF="node41.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="next_motif.gif"></A> 
<A NAME="tex2html967"
 HREF="node34.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="up_motif.gif"></A> 
<A NAME="tex2html961"
 HREF="node39.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="previous_motif.gif"></A> 
<A NAME="tex2html969"
 HREF="node7.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="contents_motif.gif"></A> 
<A NAME="tex2html970"
 HREF="node120.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index"
 SRC="index_motif.gif"></A> 
<BR>
<B> Дал╕:</B> <A NAME="tex2html972"
 HREF="node41.html">Розд╕ли</A>
<B> Вгору:</B> <A NAME="tex2html968"
 HREF="node34.html">Використання диск╕в та ╕нших</A>
<B> Назад:</B> <A NAME="tex2html962"
 HREF="node39.html">Стр╕чки</A>
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00660000000000000000">
Форматування</A>
</H1>
<P>
<FONT SIZE="+1"><FONT SIZE="+1"><B>Форматування</B> - це процес запису спец╕альних позначок
	на магн╕тних нос╕ях, як╕ використовуються для позначення
	дор╕жок та сектор╕в. До форматування магн╕тна поверхня - це
	повна м╕шанина магн╕тних сигнал╕в. П╕сля цього в хаос
	вноситься певних порядок за рахунок проведення меж дор╕жок та
	магн╕тних позначок, як╕ розд╕ляють ╖х на сектори. Справжн╕й
	процес не наст╕льки простий, але це не стосу╓ться сут╕
	справи. Що ╓ насправд╕ важливим - це, те, що диском неможливо
	користуватися без попереднього форматування.
</FONT></FONT>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">Трохи вводить в оману терм╕ноло╜╕я, що застосову╓ться тут - в
	MS-DOS слово `форматування' в╕дноситься до процесу створення
	файлово╖ системи (про що йдеться трохи дал╕). Але насправд╕
	╕сну╓ два процеси, як╕ часто об'╓днуються, особливо для
	дискет. Тод╕, коли треба в╕др╕зняти ц╕ два процеси, те, що
	справд╕ ╓ форматуванням називають <B>форматуванням
	низького р╕вня<A NAME="tex2html59"
 HREF="footnode.html#foot3001"><SUP>56</SUP></A></B>, а про створення
	файлово╖ системи говорять, що це - <B>форматування
	високого р╕вня<A NAME="tex2html60"
 HREF="footnode.html#foot3008"><SUP>57</SUP></A></B>. В св╕т╕ Юн╕кса
	про ц╕ два процеси говорять `форматування' та `створення
	файлово╖ системи', отже це ╕ будуть т╕ терм╕ни, як╕
	використовуються в ц╕й книжц╕.
	
	Для IDE та деяких SCSI диск╕в форматування фактично
	викону╓ться на завод╕ ╕ його не потр╕бно робити вдруге, тобто,
	б╕льш╕сть людей взагал╕ не повинн╕ турбуватися про
	форматування. Насправд╕, форматування може нав╕ть привести до
	того, що диск буде працювати г╕рше, наприклад, через те, що,
	можливо, форматувати необх╕дно якимось спец╕альним чином, так,
	щоб автоматично зам╕нювати дефектн╕ сектори.
</FONT></FONT>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">Диски, як╕ потр╕бно або можна форматувати, часто вимагають
	спец╕ально╖ програми для цього - лог╕ка, що використову╓ться
	для форматування в╕др╕зня╓ться в╕д диску до диску. Форматуюча
	програма часто або знаходиться в BIOS'╕ контролера або
	постача╓ться у вигляд╕ програми для MS-DOS, н╕ тим, н╕ ╕ншим не
	просто користуватися ╕з Л╕накса. 
</FONT></FONT>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">П╕д час форматування можна пом╕тити деяк╕ дефектн╕ м╕сця на
	диску, що називаються <B>дефектними блоками</B> або
	<B>дефектними секторами</B>. В деяких випадках прив╕д
	турбу╓ться про них самост╕йно, але нав╕ть якщо це так, якщо
	к╕льк╕сть дефект╕в зб╕льшу╓ться, то щось треба з ними робити
	для того, щоб не користуватися дефектними м╕сцями на
	диску. Лог╕ка, що застосову╓ться для цього, вбудована в
	файлову систему. Дал╕ буде йтися про те, як додати таку
	╕нформац╕ю до файлово╖ системи. Додатково можна створити
	невеликий розд╕л на диску, який буде покривати т╕льки дефектн╕
	област╕, бо при занадто велик╕й к╕лькост╕ зб╕йних блок╕в
	нав╕ть файлова система може мати з ними певн╕ труднощ╕.
</FONT></FONT>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">Дискети форматуються командою <TT>fdformat</TT><A NAME="3016">&#160;</A>.  Як параметр
	команд╕ повинна надаватися назва спец╕ального файлу
	дискети. Наприклад, для форматування 3.5-дюймово╖ дискети
	високо╖ щ╕льност╕ використову╓ться така команда:
</FONT></FONT>
<P>
<BLOCKQUOTE><FONT SIZE="+1"><FONT SIZE="+1">
<TT>
<code>$</code> <I>fdformat /dev/fd0H1440</I> <BR>
<code>Double-sided, 80 tracks, 18 sec/track. Total capacity 1440 kB.</code> <BR>
<code>Formatting ... done</code> <BR>
<code>Verifying ... done</code> <BR>
<code>$</code>
</TT></FONT></FONT></BLOCKQUOTE><FONT SIZE="+1"><FONT SIZE="+1">
	
	В╕дм╕тимо, що якщо Ви хочете користуватися спец╕альним файлом
	з автоматичним визначенням типу дисекети, Ви <EM>повинн╕</EM>
	встановити параметри дискети командою <TT>setfdprm</TT><A NAME="3018">&#160;</A> до
	цього. Наступн╕ команди будуть мати той ж результат, що й
	попередн╕:
</FONT></FONT>
<P>
<BLOCKQUOTE><FONT SIZE="+1"><FONT SIZE="+1">
<TT>
<code>$</code> <I>setfdprm /dev/fd0 1440/1440</I> <BR>
<code>$</code> <I>fdformat /dev/fd0</I> <BR>
<code>Double-sided, 80 tracks, 18 sec/track. Total capacity 1440 kB.</code> <BR>
<code>Formatting ... done</code> <BR>
<code>Verifying ... done</code> <BR>
<code>$</code>
<code>$</code>
</TT></FONT></FONT></BLOCKQUOTE>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">Сл╕д користуватися типом спец╕ального файлу, що в╕дпов╕да╓
	типу дискети ╕ не варто форматувати дискету на об'╓ми б╕льший,
	н╕ж той, на який вона розрахована.
</FONT></FONT>
<P>
<FONT SIZE="+1"><FONT SIZE="+1"><TT>fdformat</TT><A NAME="3020">&#160;</A> також перев╕рить дискету, тобто, пом╕тить
	зб╕йн╕ блоки. В╕н буде намагатися записати (в╕дформатувати)
	дефектн╕ блоки по к╕лька раз╕в (Ви це почу╓те, звук приводу
	при цьому зм╕ню╓ться сутт╓во). Якщо дискета не надто з╕псована
	(невелик╕ часточки бруду, що попали на записуючу головку,
	деяк╕ др╕бн╕ помилки читання, тощо), <TT>fdformat</TT><A NAME="3022">&#160;</A> пропустить
	╖х, але сутт╓в╕ помилки спричинять зупинку процесу
	перев╕рки. Ядро надруку╓ пов╕домлення про кожну з помилок
	вводу/виводу, вс╕ вони будуть направлятися на консоль або в
	файл <TT>/usr/adm/messages</TT><A NAME="3024">&#160;</A><A NAME="tex2html61"
 HREF="footnode.html#foot3034"><SUP>58</SUP></A> якщо працю╓ <TT>syslog</TT><A NAME="3064">&#160;</A>. <TT>fdformat</TT><A NAME="3066">&#160;</A> однак не
	буде пов╕домляти, де саме трапилася помилка, але саму це якраз
	дуже мало кого хвилю╓ в наш час, оск╕льки при дешевизн╕
	гнучких диск╕в зараз набагато легше (╕ часто дешевше -Д.К.)
	викинути зб╕йну дискету.
</FONT></FONT>
<P>
<BLOCKQUOTE><FONT SIZE="+1"><FONT SIZE="+1">
<TT>
<code>$</code> <I>fdformat /dev/fd0H1440</I> <BR>
<code>Double-sided, 80 tracks, 18 sec/track. Total capacity 1440 kB.</code> <BR>
<code>Formatting ... done</code> <BR>
<code>Verifying ... read: Unknown error</code> <BR>
<code>$</code>
		</TT></FONT></FONT></BLOCKQUOTE>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">Для того, щоб в╕дшукати зб╕йн╕ блоки на будь-якому диску (в
	тому числ╕ ╕ на дискет╕) можна скористатися командою
	<TT>badblocks</TT><A NAME="3068">&#160;</A>. Вона не формату╓ диску, тобто нею можна
	скористуватися нав╕ть для перев╕рки ╕снуючих файлових
	систем. Для прикладу розгляньте команду, яка перев╕рила
	3.5 дюймову дискету ╕ видала ╕нформац╕ю про два
	зб╕йних блоки:
</FONT></FONT>
<P>
<BLOCKQUOTE><FONT SIZE="+1"><FONT SIZE="+1">
<TT>
<code>$</code> <I>badblocks /dev/fd0H1440 1440</I> <BR>
<code>718</code> <BR>
<code>719</code> <BR>
<code>$</code>
		</TT></FONT></FONT></BLOCKQUOTE>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">Команда <TT>badblocks</TT><A NAME="3070">&#160;</A> просто друку╓ номери знайдених нею
	зб╕йних блок╕в. Б╕льш╕сть файлових систем вм╕ють обходити
	зб╕йн╕ блоки. В файлов╕й систем╕ м╕ститься список ╕з зб╕йними
	блоками. Цей список створю╓ться при створенн╕ само╖ файлово╖
	системи, але до нього можна додавати нов╕ блоки ╕
	п╕зн╕ше. Спочатку список зб╕йних блок╕в створю╓ться командою
	<TT>mkfs</TT><A NAME="3072">&#160;</A> (Яка створю╓ файлову систему)<A NAME="tex2html62"
 HREF="footnode.html#foot3080"><SUP>59</SUP></A>, але п╕сля цього перев╕ряти файлову систему
	потр╕бно командою <TT>badblocks</TT><A NAME="3098">&#160;</A> ╕ додавати нов╕ блоки до
	списку зб╕йних треба командою <TT>fsck</TT><A NAME="3100">&#160;</A>. Опис команд
	<TT>mkfs</TT><A NAME="3102">&#160;</A> та <TT>fsck</TT><A NAME="3104">&#160;</A> ╕де дал╕.
	
	Б╕льш╕сть сучасних диск╕в достатньо "розумн╕" для того, щоб
	визначати сво╖ власн╕ зб╕йн╕ блоки ╕ щоб спробувати ╖х
	в╕дновити, використовуючи ╕нш╕ зарезерован╕ для ц╕╓╖ мети
	блоки. Ця операц╕я непом╕тна ("прозора") для операц╕йно╖
	системи. Якщо Вас ц╕кавить, чи це ╓ под╕бна функц╕я у Ваших
	дисках, то, мабуть, ця функц╕я повинна бути описана в
	документац╕╖ до диск╕в. Але нав╕ть такий диск може в╕дмовити,
	коли число зб╕йних блок╕в зб╕льшу╓ться занадто. Але, напевне,
	що коли таке трапиться, то диск буде нарешт╕ вже наст╕льки
	застар╕лим, що, певне, у Вас не виникне нав╕ть ╕ бажання ним
	користуватися.
</FONT></FONT>
<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html971"
 HREF="node41.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="next_motif.gif"></A> 
<A NAME="tex2html967"
 HREF="node34.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="up_motif.gif"></A> 
<A NAME="tex2html961"
 HREF="node39.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="previous_motif.gif"></A> 
<A NAME="tex2html969"
 HREF="node7.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="contents_motif.gif"></A> 
<A NAME="tex2html970"
 HREF="node120.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index"
 SRC="index_motif.gif"></A> 
<BR>
<B> Дал╕:</B> <A NAME="tex2html972"
 HREF="node41.html">Розд╕ли</A>
<B> Вгору:</B> <A NAME="tex2html968"
 HREF="node34.html">Використання диск╕в та ╕нших</A>
<B> Назад:</B> <A NAME="tex2html962"
 HREF="node39.html">Стр╕чки</A>
<!--End of Navigation Panel-->
<ADDRESS>
<I>Dmytro Kovalev</I>
<BR><I>1999-06-10</I>
</ADDRESS>
</BODY>
</HTML>
