<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.1 release (February 19th, 1998)
originally by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Перев╕рка ц╕л╕сност╕ файлових систем за допомогою fsck</TITLE>
<META NAME="description" CONTENT="Перев╕рка ц╕л╕сност╕ файлових систем за допомогою fsck">
<META NAME="keywords" CONTENT="linux,ukrainian,guide,sag">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL="STYLESHEET" HREF="sag.css">
<LINK REL="next" HREF="node54.html">
<LINK REL="previous" HREF="node52.html">
<LINK REL="up" HREF="node47.html">
<LINK REL="next" HREF="node54.html">
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<!--Navigation Panel-->
<A NAME="tex2html1140"
 HREF="node54.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="next_motif.gif"></A> 
<A NAME="tex2html1136"
 HREF="node47.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="up_motif.gif"></A> 
<A NAME="tex2html1130"
 HREF="node52.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="previous_motif.gif"></A> 
<A NAME="tex2html1138"
 HREF="node7.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="contents_motif.gif"></A> 
<A NAME="tex2html1139"
 HREF="node120.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index"
 SRC="index_motif.gif"></A> 
<BR>
<B> Дал╕:</B> <A NAME="tex2html1141"
 HREF="node54.html">Перев╕рка з╕псованих блок╕в за</A>
<B> Вгору:</B> <A NAME="tex2html1137"
 HREF="node47.html">Файлов╕ системи</A>
<B> Назад:</B> <A NAME="tex2html1131"
 HREF="node52.html">Монтування та розмонтування</A>
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00686000000000000000">&#160;</A><A NAME="3699">&#160;</A>
<BR>
Перев╕рка ц╕л╕сност╕ файлових систем за допомогою
	<TT>fsck</TT>
</H2>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">Файлов╕ системи - дуже складн╕ створ╕ння, ╕ тому, в деякому
	сенс╕, вони схильн╕ до помилок. Ц╕л╕сн╕сть файлово╖ системи чи
	наявн╕сть в н╕й помилок можна перев╕рити за допомогою команди
	<TT>fsck</TT><A NAME="3701">&#160;</A>. Команд╕ можна вказати, що вона повинна виправляти
	вс╕ незначн╕ помилки, як╕ вона в╕дшука╓, ╕ попереджати
	користувача, якщо трапляються так╕ з них, як╕ не можна
	виправити. На щастя, б╕бл╕отеки вживан╕ для файлових систем
	вже в╕длагоджен╕ досить добре, ╕ проблеми з ними трапляються
	досить р╕дко (або ╖х взагал╕ не бува╓). Збо╖ в файлових
	системах найчаст╕ше трапляються через перебо╖ в
	електропостачанн╕, збо╖ в ``зал╕з╕'' чи через помилки
	оператор╕в, як, наприклад, не вимкнена за правилами система.
</FONT></FONT>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">Б╕льш╕сть систем виконують <TT>fsck</TT><A NAME="3703">&#160;</A> автоматино при старт╕
	системи, так, що б╕льш╕сть помилок знаходяться (╕, дай Боже,
	виправляються) до того, як система почина╓
	використовуватися. Використання з╕псовано╖ файлово╖ системи
	приводить до того, що погане ста╓ ще г╕ршим: якщо структури
	даних файлово╖ системи з╕псован╕, використання цих структур
	може т╕льки зробити ╖х ще г╕ршими, що приведе до ще б╕льших
	втрат даних. Але, з ╕ншого боку, повна перев╕рка файлово╖
	системи на великих файлових системах за допомогою <TT>fsck</TT><A NAME="3705">&#160;</A>
	може займати досить довгий час. ╤, через те, що помилки
	практично н╕коли не трапляються при корректному вимкненн╕
	системи, для того, щоб не затягувати час старту системи, в
	Л╕накс╕ вдаються до деяких хитрощ╕в. Перший трюк: якщо ╕сну╓
	файл <TT>/etc/fastboot</TT><A NAME="3707">&#160;</A>, то перев╕рка файлових систем не
	робиться. Другий трюк: файлова система ext2 ма╓ спец╕альний
	маркер, який вказу╓ на те, чи була ця файлова система
	в╕дмонтована в╕рно при попередньому монтуванн╕. Знаючи, що
	файлова система була розмонтована ``чистою'' (якщо прапорець
	вказу╓ на це) <TT>e2fsck</TT><A NAME="3709">&#160;</A> (верс╕я <TT>fsck</TT><A NAME="3711">&#160;</A> спец╕ал╕зована
	для перев╕рки файлово╖ системи ext2), може не перев╕ряти цю
	файлову систему. При цьому, звичайно, робиться припущення, що
	чисте розмонтування не приносить систем╕ проблем. Чи працю╓
	перший з трюк╕в (з файлом <TT>/etc/fastboot</TT><A NAME="3713">&#160;</A>) на Ваш╕й систем╕
	залежить в╕д стартових скрипт╕в системи, але трюк з прапорцем
	монтування ext2 спрацьову╓ кожного разу, коли Ви користу╓тесь
	<TT>e2fsck</TT><A NAME="3715">&#160;</A>. Щоб змусити команду ╕гнорувати цей прапорець, це
	потр╕бно явно вказати за допомого параметра. (Детал╕ див╕ться
	в стор╕нц╕ п╕дказки <EM>e2fsck</EM><A NAME="3717">&#160;</A>).
</FONT></FONT>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">Автоматична перев╕рка спрацьову╓ т╕льки для тих систем, як╕
	монтуються автоматично при старт╕ системи. Для перев╕рки ╕нших
	файлових систем, як, наприклад, дискет, користуйтесь
	<TT>fsck</TT><A NAME="3719">&#160;</A>, запускаючи ╖╖ вручну. <A NAME="tex2html102"
 HREF="footnode.html#foot3727"><SUP>95</SUP></A>
</FONT></FONT>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">Якщо <TT>fsck</TT><A NAME="3745">&#160;</A> при перев╕рц╕ натрапля╓ на файлову систему,
	яку вона не може в╕дремонтувати, тр Вас може спасти т╕льки
	одне з двох: або глибок╕ п╕знання про будову файлових систем
	взагал╕ ╕ даного типу конкретно, або гарна резервна
	коп╕я. Друге - зробити просто, а першого Ви можете досягти за
	допомогою друз╕в, п╕дписно╖ групи новин та п╕дписного листа по
	Л╕наксу чи задопомогою ╕нших засоб╕в знаходження ╕нформац╕╖. Я
	хот╕в би розпов╕сти про це б╕льше, але б╕л╕ плями в осв╕т╕ та
	досв╕д╕ не дають мен╕ цього зробити. Програма Теодора Цо
	<A NAME="tex2html103"
 HREF="footnode.html#foot3746"><SUP>96</SUP></A> <TT>debugfs</TT><A NAME="3752">&#160;</A> може Вам допомогти при
	цьому.
</FONT></FONT>
<P>
<FONT SIZE="+1"><FONT SIZE="+1">Користуйтеся <TT>fsck</TT><A NAME="3754">&#160;</A> т╕льки на розмонтованих файлових
	системах, н╕коли на змонтованих (за виключенням коренево╖
	файлово╖ системи при старт╕, яка монту╓тся при цьому т╕льки на
	читання). Через те, що <TT>fsck</TT><A NAME="3756">&#160;</A> працю╓ з ``сирими''
	розд╕лами диску, вона може зм╕нювати файлов╕ системи так, що
	система про це нав╕ть не здогада╓ться. А якщо операц╕йну
	систему дурити, то непри╓мност╕ <EM> трапляться</EM>.
</FONT></FONT>
<P>
<BR><HR>
<ADDRESS>
<I>Dmytro Kovalev</I>
<BR><I>1999-06-10</I>
</ADDRESS>
</BODY>
</HTML>
